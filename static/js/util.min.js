define(["crypto-js"],function(u){function f(e,t,r){var o=new XMLHttpRequest;o.open("GET",e+"?please-dont-cache="+Math.random(),!0),o.onload=function(){o.status<200||299<o.status?t("Error: HTTP Status "+o.status+" on resource "+e):t(null,o.responseText,r)},o.send()}function Base64EncodeUrlSafe(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}return{getCanvas:function(e){var t=$("#"+e);return t[0]||$("#test_canvas").append("<canvas id='"+e+"' width='256' height='256'></canvas>"),$("#"+e)[0]},getGLAA:function(e){for(var t=null,r=0;r<4&&!(t=e.getContext(["webgl","experimental-webgl","moz-webgl","webkit-3d"][r],{antialias:!0,preserveDrawingBuffer:!0,willReadFrequently:!1,depth:!0}));++r);return t||alert("Your browser does not support WebGL"),t},getGL:function(e){for(var t=null,r=0;r<4&&!(t=e.getContext(["webgl","experimental-webgl","moz-webgl","webkit-3d"][r],{antialias:!1,preserveDrawingBuffer:!0,willReadFrequently:!1,depth:!0}));++r);return t||alert("Your browser does not support WebGL"),t},computeKernelWeight:function(e){var t=e.reduce(function(e,t){return e+t});return t<=0?1:t},loadTextResource:f,loadImage:function(e,t,r){var o=new Image;o.onload=function(){t(null,o,r)},o.src=e},Secret_Key:function Secret_Key(e){return{str:e,ary:[],aol:[],reg:/[z]/g,rgo:/[y]/g,so:"",c:function(e){console.log("0-------传入得原始参数------",e);var n=this,t=this.str.length;this.str=this.str.split("").reverse().join("");for(var r=[Math.floor(t/5),Math.floor(t/3),Math.floor(t/6),Math.floor(t/2.4)],o=0;o<r.length;o++){var s=r[o],a="";a=isNaN(Number(this.str[s]))?this.str[s].toUpperCase():Number(this.str[s])+5+"";var i=this.str.split("");i[s]=a,this.str=i.join("")}console.log("1-------反转了str，并且数字+5，字母转大写------",this.str),this.ary=this.str.split(""),console.log("数组",this.ary),this.ary.forEach(function(e,t){if(t%2!=0&&t+1<n.ary.length-1){var r=n.ary[t+1];n.ary[t+1]=n.ary[t],n.ary[t]=r}}),this.str=this.ary.join(""),console.log("2-------奇偶位置互换------",this.str),console.log("2-------encodeURIComponent------",encodeURIComponent(this.str)),this.str=btoa(encodeURIComponent(this.str)),console.log("3-------base64------",this.str),this.str=this.str.replace(this.reg,function(){return"m!@"}),console.log("3-------所有得z换成m!@------",this.str),this.str=btoa(encodeURIComponent(this.str)),console.log("4-------base64转换------",this.str);var l=u.enc.Utf8.parse("1234567812345678"),c=(u.enc.Utf8.parse("0123456789ABCDEF"),u.AES.encrypt(this.str,l,{mode:u.mode.ECB,padding:u.pad.Pkcs7}));this.str=""+c,console.log("5-------AES加密------",this.str),this.aol=this.str.replace(this.rgo,"$o$").split(""),console.log("6-------将所有得y换成$o$------",this.str.replace(this.rgo,"$o$"));var f=this.aol.length,g=parseInt(f/2);this.aol.forEach(function(e,t){if(6<f&&t<f-6&&t<g){var r=f-t-6,o=n.aol[r];n.aol[r]=n.aol[t],n.aol[t]=o}}),n.str=this.aol.reverse().join(""),console.log("7-------前后互换位置------",n.str),n.str=btoa(n.str),console.log("7-------base64------",n.str),console.log("7-------base64------",n.str),console.log("9999-------base64------",atob(n.str));var h=u.enc.Utf8.parse("8765432187654321"),d=u.AES.encrypt(this.str,h,{mode:u.mode.ECB,padding:u.pad.Pkcs7});return n.str=""+d,console.log("8-------再次aes加密------",this.str),this.str=this.str.substring(0,32),"string"==typeof e?n.enFn(e,n.str):n.enFn(JSON.stringify(e),n.str)},enFn:function(e,t){console.log("9-------进入加密参数函数中，传入得key值------",t),console.log("9-------参数的值------",e);var r=u.enc.Utf8.parse(t);console.log("10-------key值得parse------",r);u.enc.Utf8.parse("0123456789ABCDEF");var o=u.AES.encrypt(e,r,{mode:u.mode.ECB,padding:u.pad.Pkcs7});return console.log("11-------加密之后得参数------",o),console.log("11-------加密之后得参数------",o.toString(u.enc.Utf8).toString()),o=o.toString(),console.log("12-------加密之后得参数------",o),o}}},Base64EncodeUrlSafe:Base64EncodeUrlSafe,stringify:function stringify(e){for(var t="",r=0,o=e.length;r<o;r+=4)t+=String.fromCharCode(e[r+0]),t+=String.fromCharCode(e[r+1]),t+=String.fromCharCode(e[r+2]);return Base64EncodeUrlSafe(window.btoa(t))},loadJSONResource:function(e,o,t){f(e,function(e,t,r){if(e)o(e);else try{o(null,JSON.parse(t),r)}catch(e){o(e)}},t)},myBrowser:function myBrowser(){var e=navigator.userAgent,t=-1<e.indexOf("Opera"),r=-1<e.indexOf("compatible")&&-1<e.indexOf("MSIE")&&!t,o=-1<e.indexOf("Edge"),n=-1<e.indexOf("Trident"),s=-1<e.indexOf("Firefox"),a=-1<e.indexOf("Safari")&&-1==e.indexOf("Chrome"),i=-1<e.indexOf("Chrome")&&-1<e.indexOf("Safari");if(r){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var l=parseFloat(RegExp.$1);return 7==l?"IE7":8==l?"IE8":9==l?"IE9":10==l?"IE10":11==l?"IE11":"0"}return t?"Opera":o?"Edge":s?"Firefox":a?"Safari":i?"Chrome":n?"IE":void 0}}});